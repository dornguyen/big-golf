{"ast":null,"code":"\"use strict\";\n\nlet util = require(\"util\");\nlet Stream = require(\"stream\");\nlet constants = require(\"./constants\");\nlet Packer = require(\"./packer\");\nlet PackerAsync = module.exports = function (opt) {\n  Stream.call(this);\n  let options = opt || {};\n  this._packer = new Packer(options);\n  this._deflate = this._packer.createDeflate();\n  this.readable = true;\n};\nutil.inherits(PackerAsync, Stream);\nPackerAsync.prototype.pack = function (data, width, height, gamma) {\n  // Signature\n  this.emit(\"data\", Buffer.from(constants.PNG_SIGNATURE));\n  this.emit(\"data\", this._packer.packIHDR(width, height));\n  if (gamma) {\n    this.emit(\"data\", this._packer.packGAMA(gamma));\n  }\n  let filteredData = this._packer.filterData(data, width, height);\n\n  // compress it\n  this._deflate.on(\"error\", this.emit.bind(this, \"error\"));\n  this._deflate.on(\"data\", function (compressedData) {\n    this.emit(\"data\", this._packer.packIDAT(compressedData));\n  }.bind(this));\n  this._deflate.on(\"end\", function () {\n    this.emit(\"data\", this._packer.packIEND());\n    this.emit(\"end\");\n  }.bind(this));\n  this._deflate.end(filteredData);\n};","map":{"version":3,"names":["util","require","Stream","constants","Packer","PackerAsync","module","exports","opt","call","options","_packer","_deflate","createDeflate","readable","inherits","prototype","pack","data","width","height","gamma","emit","Buffer","from","PNG_SIGNATURE","packIHDR","packGAMA","filteredData","filterData","on","bind","compressedData","packIDAT","packIEND","end"],"sources":["C:/Users/Daniel/node_modules/appium/node_modules/pngjs/lib/packer-async.js"],"sourcesContent":["\"use strict\";\n\nlet util = require(\"util\");\nlet Stream = require(\"stream\");\nlet constants = require(\"./constants\");\nlet Packer = require(\"./packer\");\n\nlet PackerAsync = (module.exports = function (opt) {\n  Stream.call(this);\n\n  let options = opt || {};\n\n  this._packer = new Packer(options);\n  this._deflate = this._packer.createDeflate();\n\n  this.readable = true;\n});\nutil.inherits(PackerAsync, Stream);\n\nPackerAsync.prototype.pack = function (data, width, height, gamma) {\n  // Signature\n  this.emit(\"data\", Buffer.from(constants.PNG_SIGNATURE));\n  this.emit(\"data\", this._packer.packIHDR(width, height));\n\n  if (gamma) {\n    this.emit(\"data\", this._packer.packGAMA(gamma));\n  }\n\n  let filteredData = this._packer.filterData(data, width, height);\n\n  // compress it\n  this._deflate.on(\"error\", this.emit.bind(this, \"error\"));\n\n  this._deflate.on(\n    \"data\",\n    function (compressedData) {\n      this.emit(\"data\", this._packer.packIDAT(compressedData));\n    }.bind(this)\n  );\n\n  this._deflate.on(\n    \"end\",\n    function () {\n      this.emit(\"data\", this._packer.packIEND());\n      this.emit(\"end\");\n    }.bind(this)\n  );\n\n  this._deflate.end(filteredData);\n};\n"],"mappings":"AAAA,YAAY;;AAEZ,IAAIA,IAAI,GAAGC,OAAO,CAAC,MAAM,CAAC;AAC1B,IAAIC,MAAM,GAAGD,OAAO,CAAC,QAAQ,CAAC;AAC9B,IAAIE,SAAS,GAAGF,OAAO,CAAC,aAAa,CAAC;AACtC,IAAIG,MAAM,GAAGH,OAAO,CAAC,UAAU,CAAC;AAEhC,IAAII,WAAW,GAAIC,MAAM,CAACC,OAAO,GAAG,UAAUC,GAAG,EAAE;EACjDN,MAAM,CAACO,IAAI,CAAC,IAAI,CAAC;EAEjB,IAAIC,OAAO,GAAGF,GAAG,IAAI,CAAC,CAAC;EAEvB,IAAI,CAACG,OAAO,GAAG,IAAIP,MAAM,CAACM,OAAO,CAAC;EAClC,IAAI,CAACE,QAAQ,GAAG,IAAI,CAACD,OAAO,CAACE,aAAa,EAAE;EAE5C,IAAI,CAACC,QAAQ,GAAG,IAAI;AACtB,CAAE;AACFd,IAAI,CAACe,QAAQ,CAACV,WAAW,EAAEH,MAAM,CAAC;AAElCG,WAAW,CAACW,SAAS,CAACC,IAAI,GAAG,UAAUC,IAAI,EAAEC,KAAK,EAAEC,MAAM,EAAEC,KAAK,EAAE;EACjE;EACA,IAAI,CAACC,IAAI,CAAC,MAAM,EAAEC,MAAM,CAACC,IAAI,CAACrB,SAAS,CAACsB,aAAa,CAAC,CAAC;EACvD,IAAI,CAACH,IAAI,CAAC,MAAM,EAAE,IAAI,CAACX,OAAO,CAACe,QAAQ,CAACP,KAAK,EAAEC,MAAM,CAAC,CAAC;EAEvD,IAAIC,KAAK,EAAE;IACT,IAAI,CAACC,IAAI,CAAC,MAAM,EAAE,IAAI,CAACX,OAAO,CAACgB,QAAQ,CAACN,KAAK,CAAC,CAAC;EACjD;EAEA,IAAIO,YAAY,GAAG,IAAI,CAACjB,OAAO,CAACkB,UAAU,CAACX,IAAI,EAAEC,KAAK,EAAEC,MAAM,CAAC;;EAE/D;EACA,IAAI,CAACR,QAAQ,CAACkB,EAAE,CAAC,OAAO,EAAE,IAAI,CAACR,IAAI,CAACS,IAAI,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;EAExD,IAAI,CAACnB,QAAQ,CAACkB,EAAE,CACd,MAAM,EACN,UAAUE,cAAc,EAAE;IACxB,IAAI,CAACV,IAAI,CAAC,MAAM,EAAE,IAAI,CAACX,OAAO,CAACsB,QAAQ,CAACD,cAAc,CAAC,CAAC;EAC1D,CAAC,CAACD,IAAI,CAAC,IAAI,CAAC,CACb;EAED,IAAI,CAACnB,QAAQ,CAACkB,EAAE,CACd,KAAK,EACL,YAAY;IACV,IAAI,CAACR,IAAI,CAAC,MAAM,EAAE,IAAI,CAACX,OAAO,CAACuB,QAAQ,EAAE,CAAC;IAC1C,IAAI,CAACZ,IAAI,CAAC,KAAK,CAAC;EAClB,CAAC,CAACS,IAAI,CAAC,IAAI,CAAC,CACb;EAED,IAAI,CAACnB,QAAQ,CAACuB,GAAG,CAACP,YAAY,CAAC;AACjC,CAAC"},"metadata":{},"sourceType":"script"}