{"ast":null,"code":"/**\n * node-crc32-stream\n *\n * Copyright (c) 2014 Chris Talkington, contributors.\n * Licensed under the MIT license.\n * https://github.com/archiverjs/node-crc32-stream/blob/master/LICENSE-MIT\n */\n\n'use strict';\n\nconst {\n  DeflateRaw\n} = require('zlib');\nconst crc32 = require('crc-32');\nclass DeflateCRC32Stream extends DeflateRaw {\n  constructor(options) {\n    super(options);\n    this.checksum = Buffer.allocUnsafe(4);\n    this.checksum.writeInt32BE(0, 0);\n    this.rawSize = 0;\n    this.compressedSize = 0;\n  }\n  push(chunk, encoding) {\n    if (chunk) {\n      this.compressedSize += chunk.length;\n    }\n    return super.push(chunk, encoding);\n  }\n  _transform(chunk, encoding, callback) {\n    if (chunk) {\n      this.checksum = crc32.buf(chunk, this.checksum) >>> 0;\n      this.rawSize += chunk.length;\n    }\n    super._transform(chunk, encoding, callback);\n  }\n  digest(encoding) {\n    const checksum = Buffer.allocUnsafe(4);\n    checksum.writeUInt32BE(this.checksum >>> 0, 0);\n    return encoding ? checksum.toString(encoding) : checksum;\n  }\n  hex() {\n    return this.digest('hex').toUpperCase();\n  }\n  size() {\n    let compressed = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    if (compressed) {\n      return this.compressedSize;\n    } else {\n      return this.rawSize;\n    }\n  }\n}\nmodule.exports = DeflateCRC32Stream;","map":{"version":3,"names":["DeflateRaw","require","crc32","DeflateCRC32Stream","constructor","options","checksum","Buffer","allocUnsafe","writeInt32BE","rawSize","compressedSize","push","chunk","encoding","length","_transform","callback","buf","digest","writeUInt32BE","toString","hex","toUpperCase","size","compressed","module","exports"],"sources":["C:/Users/Daniel/node_modules/appium/node_modules/crc32-stream/lib/deflate-crc32-stream.js"],"sourcesContent":["/**\n * node-crc32-stream\n *\n * Copyright (c) 2014 Chris Talkington, contributors.\n * Licensed under the MIT license.\n * https://github.com/archiverjs/node-crc32-stream/blob/master/LICENSE-MIT\n */\n\n'use strict';\n\nconst {DeflateRaw} = require('zlib');\n\nconst crc32 = require('crc-32');\n\nclass DeflateCRC32Stream extends DeflateRaw {\n  constructor(options) {\n    super(options);\n\n    this.checksum = Buffer.allocUnsafe(4);\n    this.checksum.writeInt32BE(0, 0);\n\n    this.rawSize = 0;\n    this.compressedSize = 0;\n  }\n\n  push(chunk, encoding) {\n    if (chunk) {\n      this.compressedSize += chunk.length;\n    }\n\n    return super.push(chunk, encoding);\n  }\n\n  _transform(chunk, encoding, callback) {\n    if (chunk) {\n      this.checksum = crc32.buf(chunk, this.checksum) >>> 0;\n      this.rawSize += chunk.length;\n    }\n\n    super._transform(chunk, encoding, callback)\n  }\n\n  digest(encoding) {\n    const checksum = Buffer.allocUnsafe(4);\n    checksum.writeUInt32BE(this.checksum >>> 0, 0);\n    return encoding ? checksum.toString(encoding) : checksum;\n  }\n\n  hex() {\n    return this.digest('hex').toUpperCase();\n  }\n\n  size(compressed = false) {\n    if (compressed) {\n      return this.compressedSize;\n    } else {\n      return this.rawSize;\n    }\n  }\n}\n\nmodule.exports = DeflateCRC32Stream;\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,YAAY;;AAEZ,MAAM;EAACA;AAAU,CAAC,GAAGC,OAAO,CAAC,MAAM,CAAC;AAEpC,MAAMC,KAAK,GAAGD,OAAO,CAAC,QAAQ,CAAC;AAE/B,MAAME,kBAAkB,SAASH,UAAU,CAAC;EAC1CI,WAAW,CAACC,OAAO,EAAE;IACnB,KAAK,CAACA,OAAO,CAAC;IAEd,IAAI,CAACC,QAAQ,GAAGC,MAAM,CAACC,WAAW,CAAC,CAAC,CAAC;IACrC,IAAI,CAACF,QAAQ,CAACG,YAAY,CAAC,CAAC,EAAE,CAAC,CAAC;IAEhC,IAAI,CAACC,OAAO,GAAG,CAAC;IAChB,IAAI,CAACC,cAAc,GAAG,CAAC;EACzB;EAEAC,IAAI,CAACC,KAAK,EAAEC,QAAQ,EAAE;IACpB,IAAID,KAAK,EAAE;MACT,IAAI,CAACF,cAAc,IAAIE,KAAK,CAACE,MAAM;IACrC;IAEA,OAAO,KAAK,CAACH,IAAI,CAACC,KAAK,EAAEC,QAAQ,CAAC;EACpC;EAEAE,UAAU,CAACH,KAAK,EAAEC,QAAQ,EAAEG,QAAQ,EAAE;IACpC,IAAIJ,KAAK,EAAE;MACT,IAAI,CAACP,QAAQ,GAAGJ,KAAK,CAACgB,GAAG,CAACL,KAAK,EAAE,IAAI,CAACP,QAAQ,CAAC,KAAK,CAAC;MACrD,IAAI,CAACI,OAAO,IAAIG,KAAK,CAACE,MAAM;IAC9B;IAEA,KAAK,CAACC,UAAU,CAACH,KAAK,EAAEC,QAAQ,EAAEG,QAAQ,CAAC;EAC7C;EAEAE,MAAM,CAACL,QAAQ,EAAE;IACf,MAAMR,QAAQ,GAAGC,MAAM,CAACC,WAAW,CAAC,CAAC,CAAC;IACtCF,QAAQ,CAACc,aAAa,CAAC,IAAI,CAACd,QAAQ,KAAK,CAAC,EAAE,CAAC,CAAC;IAC9C,OAAOQ,QAAQ,GAAGR,QAAQ,CAACe,QAAQ,CAACP,QAAQ,CAAC,GAAGR,QAAQ;EAC1D;EAEAgB,GAAG,GAAG;IACJ,OAAO,IAAI,CAACH,MAAM,CAAC,KAAK,CAAC,CAACI,WAAW,EAAE;EACzC;EAEAC,IAAI,GAAqB;IAAA,IAApBC,UAAU,uEAAG,KAAK;IACrB,IAAIA,UAAU,EAAE;MACd,OAAO,IAAI,CAACd,cAAc;IAC5B,CAAC,MAAM;MACL,OAAO,IAAI,CAACD,OAAO;IACrB;EACF;AACF;AAEAgB,MAAM,CAACC,OAAO,GAAGxB,kBAAkB"},"metadata":{},"sourceType":"script"}