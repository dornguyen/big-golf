{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar _utils = require(\"@jimp/utils\");\n\n/**\n * Applies a minimum color threshold to a greyscale image.  Converts image to greyscale by default\n * @param {number} options object\n *  max: A number auto limited between 0 - 255\n *  replace: (optional) A number auto limited between 0 - 255 (default 255)\n *  autoGreyscale: (optional) A boolean whether to apply greyscale beforehand (default true)\n * @param {number} cb (optional) a callback for when complete\n * @return {this} this for chaining of methods\n */\nvar _default = function _default() {\n  return {\n    threshold: function threshold(_ref, cb) {\n      var _this = this;\n      var max = _ref.max,\n        _ref$replace = _ref.replace,\n        replace = _ref$replace === void 0 ? 255 : _ref$replace,\n        _ref$autoGreyscale = _ref.autoGreyscale,\n        autoGreyscale = _ref$autoGreyscale === void 0 ? true : _ref$autoGreyscale;\n      if (typeof max !== 'number') {\n        return _utils.throwError.call(this, 'max must be a number', cb);\n      }\n      if (typeof replace !== 'number') {\n        return _utils.throwError.call(this, 'replace must be a number', cb);\n      }\n      if (typeof autoGreyscale !== 'boolean') {\n        return _utils.throwError.call(this, 'autoGreyscale must be a boolean', cb);\n      }\n      max = this.constructor.limit255(max);\n      replace = this.constructor.limit255(replace);\n      if (autoGreyscale) {\n        this.greyscale();\n      }\n      this.scanQuiet(0, 0, this.bitmap.width, this.bitmap.height, function (x, y, idx) {\n        var grey = _this.bitmap.data[idx] < max ? _this.bitmap.data[idx] : replace;\n        _this.bitmap.data[idx] = grey;\n        _this.bitmap.data[idx + 1] = grey;\n        _this.bitmap.data[idx + 2] = grey;\n      });\n      if ((0, _utils.isNodePattern)(cb)) {\n        cb.call(this, null, this);\n      }\n      return this;\n    }\n  };\n};\nexports[\"default\"] = _default;","map":{"version":3,"mappings":";;;;;;AAAA;;AAEA;;;;;;;;;eASe;EAAA,OAAO;IACpBA,SADoB,2BACoCC,EADpC,EACwC;MAAA;MAAA,IAAhDC,GAAgD,QAAhDA,GAAgD;QAAAC,oBAA3CC,OAA2C;QAA3CA,OAA2C,6BAAjC,GAAiC;QAAAC,0BAA5BC,aAA4B;QAA5BA,aAA4B,mCAAZ,IAAY;MAC1D,IAAI,OAAOJ,GAAP,KAAe,QAAnB,EAA6B;QAC3B,OAAOK,kBAAWC,IAAX,CAAgB,IAAhB,EAAsB,sBAAtB,EAA8CP,EAA9C,CAAP;MACD;MAED,IAAI,OAAOG,OAAP,KAAmB,QAAvB,EAAiC;QAC/B,OAAOG,kBAAWC,IAAX,CAAgB,IAAhB,EAAsB,0BAAtB,EAAkDP,EAAlD,CAAP;MACD;MAED,IAAI,OAAOK,aAAP,KAAyB,SAA7B,EAAwC;QACtC,OAAOC,kBAAWC,IAAX,CAAgB,IAAhB,EAAsB,iCAAtB,EAAyDP,EAAzD,CAAP;MACD;MAEDC,GAAG,GAAG,KAAKO,WAAL,CAAiBC,QAAjB,CAA0BR,GAA1B,CAAN;MACAE,OAAO,GAAG,KAAKK,WAAL,CAAiBC,QAAjB,CAA0BN,OAA1B,CAAV;MAEA,IAAIE,aAAJ,EAAmB;QACjB,KAAKK,SAAL;MACD;MAED,KAAKC,SAAL,CAAe,CAAf,EAAkB,CAAlB,EAAqB,KAAKC,MAAL,CAAYC,KAAjC,EAAwC,KAAKD,MAAL,CAAYE,MAApD,EAA4D,UAACC,CAAD,EAAIC,CAAJ,EAAOC,GAAP,EAAe;QACzE,IAAMC,IAAI,GACRC,KAAI,CAACP,MAAL,CAAYQ,IAAZ,CAAiBH,GAAjB,IAAwBhB,GAAxB,GAA8BkB,KAAI,CAACP,MAAL,CAAYQ,IAAZ,CAAiBH,GAAjB,CAA9B,GAAsDd,OADxD;QAGAgB,KAAI,CAACP,MAAL,CAAYQ,IAAZ,CAAiBH,GAAjB,IAAwBC,IAAxB;QACAC,KAAI,CAACP,MAAL,CAAYQ,IAAZ,CAAiBH,GAAG,GAAG,CAAvB,IAA4BC,IAA5B;QACAC,KAAI,CAACP,MAAL,CAAYQ,IAAZ,CAAiBH,GAAG,GAAG,CAAvB,IAA4BC,IAA5B;MACD,CAPD;MASA,IAAI,0BAAclB,EAAd,CAAJ,EAAuB;QACrBA,EAAE,CAACO,IAAH,CAAQ,IAAR,EAAc,IAAd,EAAoB,IAApB;MACD;MAED,OAAO,IAAP;IACD;EAnCmB,CAAP;AAAA,C","names":["threshold","cb","max","_ref$replace","replace","_ref$autoGreyscale","autoGreyscale","throwError","call","constructor","limit255","greyscale","scanQuiet","bitmap","width","height","x","y","idx","grey","_this","data"],"sources":["C:\\Users\\Daniel\\node_modules\\appium\\node_modules\\@jimp\\plugin-threshold\\src\\index.js"],"sourcesContent":["import { isNodePattern, throwError } from '@jimp/utils';\n\n/**\n * Applies a minimum color threshold to a greyscale image.  Converts image to greyscale by default\n * @param {number} options object\n *  max: A number auto limited between 0 - 255\n *  replace: (optional) A number auto limited between 0 - 255 (default 255)\n *  autoGreyscale: (optional) A boolean whether to apply greyscale beforehand (default true)\n * @param {number} cb (optional) a callback for when complete\n * @return {this} this for chaining of methods\n */\nexport default () => ({\n  threshold({ max, replace = 255, autoGreyscale = true }, cb) {\n    if (typeof max !== 'number') {\n      return throwError.call(this, 'max must be a number', cb);\n    }\n\n    if (typeof replace !== 'number') {\n      return throwError.call(this, 'replace must be a number', cb);\n    }\n\n    if (typeof autoGreyscale !== 'boolean') {\n      return throwError.call(this, 'autoGreyscale must be a boolean', cb);\n    }\n\n    max = this.constructor.limit255(max);\n    replace = this.constructor.limit255(replace);\n\n    if (autoGreyscale) {\n      this.greyscale();\n    }\n\n    this.scanQuiet(0, 0, this.bitmap.width, this.bitmap.height, (x, y, idx) => {\n      const grey =\n        this.bitmap.data[idx] < max ? this.bitmap.data[idx] : replace;\n\n      this.bitmap.data[idx] = grey;\n      this.bitmap.data[idx + 1] = grey;\n      this.bitmap.data[idx + 2] = grey;\n    });\n\n    if (isNodePattern(cb)) {\n      cb.call(this, null, this);\n    }\n\n    return this;\n  }\n});\n"]},"metadata":{},"sourceType":"script"}