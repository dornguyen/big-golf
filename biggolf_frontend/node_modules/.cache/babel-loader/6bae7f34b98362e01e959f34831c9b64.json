{"ast":null,"code":"\"use strict\";\n\nlet hasSyncZlib = true;\nlet zlib = require(\"zlib\");\nif (!zlib.deflateSync) {\n  hasSyncZlib = false;\n}\nlet constants = require(\"./constants\");\nlet Packer = require(\"./packer\");\nmodule.exports = function (metaData, opt) {\n  if (!hasSyncZlib) {\n    throw new Error(\"To use the sync capability of this library in old node versions, please pin pngjs to v2.3.0\");\n  }\n  let options = opt || {};\n  let packer = new Packer(options);\n  let chunks = [];\n\n  // Signature\n  chunks.push(Buffer.from(constants.PNG_SIGNATURE));\n\n  // Header\n  chunks.push(packer.packIHDR(metaData.width, metaData.height));\n  if (metaData.gamma) {\n    chunks.push(packer.packGAMA(metaData.gamma));\n  }\n  let filteredData = packer.filterData(metaData.data, metaData.width, metaData.height);\n\n  // compress it\n  let compressedData = zlib.deflateSync(filteredData, packer.getDeflateOptions());\n  filteredData = null;\n  if (!compressedData || !compressedData.length) {\n    throw new Error(\"bad png - invalid compressed data response\");\n  }\n  chunks.push(packer.packIDAT(compressedData));\n\n  // End\n  chunks.push(packer.packIEND());\n  return Buffer.concat(chunks);\n};","map":{"version":3,"names":["hasSyncZlib","zlib","require","deflateSync","constants","Packer","module","exports","metaData","opt","Error","options","packer","chunks","push","Buffer","from","PNG_SIGNATURE","packIHDR","width","height","gamma","packGAMA","filteredData","filterData","data","compressedData","getDeflateOptions","length","packIDAT","packIEND","concat"],"sources":["C:/Users/Daniel/node_modules/appium/node_modules/pngjs/lib/packer-sync.js"],"sourcesContent":["\"use strict\";\n\nlet hasSyncZlib = true;\nlet zlib = require(\"zlib\");\nif (!zlib.deflateSync) {\n  hasSyncZlib = false;\n}\nlet constants = require(\"./constants\");\nlet Packer = require(\"./packer\");\n\nmodule.exports = function (metaData, opt) {\n  if (!hasSyncZlib) {\n    throw new Error(\n      \"To use the sync capability of this library in old node versions, please pin pngjs to v2.3.0\"\n    );\n  }\n\n  let options = opt || {};\n\n  let packer = new Packer(options);\n\n  let chunks = [];\n\n  // Signature\n  chunks.push(Buffer.from(constants.PNG_SIGNATURE));\n\n  // Header\n  chunks.push(packer.packIHDR(metaData.width, metaData.height));\n\n  if (metaData.gamma) {\n    chunks.push(packer.packGAMA(metaData.gamma));\n  }\n\n  let filteredData = packer.filterData(\n    metaData.data,\n    metaData.width,\n    metaData.height\n  );\n\n  // compress it\n  let compressedData = zlib.deflateSync(\n    filteredData,\n    packer.getDeflateOptions()\n  );\n  filteredData = null;\n\n  if (!compressedData || !compressedData.length) {\n    throw new Error(\"bad png - invalid compressed data response\");\n  }\n  chunks.push(packer.packIDAT(compressedData));\n\n  // End\n  chunks.push(packer.packIEND());\n\n  return Buffer.concat(chunks);\n};\n"],"mappings":"AAAA,YAAY;;AAEZ,IAAIA,WAAW,GAAG,IAAI;AACtB,IAAIC,IAAI,GAAGC,OAAO,CAAC,MAAM,CAAC;AAC1B,IAAI,CAACD,IAAI,CAACE,WAAW,EAAE;EACrBH,WAAW,GAAG,KAAK;AACrB;AACA,IAAII,SAAS,GAAGF,OAAO,CAAC,aAAa,CAAC;AACtC,IAAIG,MAAM,GAAGH,OAAO,CAAC,UAAU,CAAC;AAEhCI,MAAM,CAACC,OAAO,GAAG,UAAUC,QAAQ,EAAEC,GAAG,EAAE;EACxC,IAAI,CAACT,WAAW,EAAE;IAChB,MAAM,IAAIU,KAAK,CACb,6FAA6F,CAC9F;EACH;EAEA,IAAIC,OAAO,GAAGF,GAAG,IAAI,CAAC,CAAC;EAEvB,IAAIG,MAAM,GAAG,IAAIP,MAAM,CAACM,OAAO,CAAC;EAEhC,IAAIE,MAAM,GAAG,EAAE;;EAEf;EACAA,MAAM,CAACC,IAAI,CAACC,MAAM,CAACC,IAAI,CAACZ,SAAS,CAACa,aAAa,CAAC,CAAC;;EAEjD;EACAJ,MAAM,CAACC,IAAI,CAACF,MAAM,CAACM,QAAQ,CAACV,QAAQ,CAACW,KAAK,EAAEX,QAAQ,CAACY,MAAM,CAAC,CAAC;EAE7D,IAAIZ,QAAQ,CAACa,KAAK,EAAE;IAClBR,MAAM,CAACC,IAAI,CAACF,MAAM,CAACU,QAAQ,CAACd,QAAQ,CAACa,KAAK,CAAC,CAAC;EAC9C;EAEA,IAAIE,YAAY,GAAGX,MAAM,CAACY,UAAU,CAClChB,QAAQ,CAACiB,IAAI,EACbjB,QAAQ,CAACW,KAAK,EACdX,QAAQ,CAACY,MAAM,CAChB;;EAED;EACA,IAAIM,cAAc,GAAGzB,IAAI,CAACE,WAAW,CACnCoB,YAAY,EACZX,MAAM,CAACe,iBAAiB,EAAE,CAC3B;EACDJ,YAAY,GAAG,IAAI;EAEnB,IAAI,CAACG,cAAc,IAAI,CAACA,cAAc,CAACE,MAAM,EAAE;IAC7C,MAAM,IAAIlB,KAAK,CAAC,4CAA4C,CAAC;EAC/D;EACAG,MAAM,CAACC,IAAI,CAACF,MAAM,CAACiB,QAAQ,CAACH,cAAc,CAAC,CAAC;;EAE5C;EACAb,MAAM,CAACC,IAAI,CAACF,MAAM,CAACkB,QAAQ,EAAE,CAAC;EAE9B,OAAOf,MAAM,CAACgB,MAAM,CAAClB,MAAM,CAAC;AAC9B,CAAC"},"metadata":{},"sourceType":"script"}